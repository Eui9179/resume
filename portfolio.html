<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>포트폴리오</title><style>
    /* cspell:disable-file */
    /* webkit printing magic: print all background colors */
    html {
        -webkit-print-color-adjust: exact;
    }
    * {
        box-sizing: border-box;
        -webkit-print-color-adjust: exact;
    }
    
    html,
    body {
        margin: 0;
        padding: 0;
    }
    @media only screen {
        body {
            margin: 2em auto;
            max-width: 750px;
            color: rgb(55, 53, 47);
        }
    }
    
    body {
        line-height: 1.5;
        white-space: pre-wrap;
    }
    
    a,
    a.visited {
        color: inherit;
        text-decoration: underline;
    }
    
    .pdf-relative-link-path {
        font-size: 80%;
        color: #444;
    }
    
    h1,
    h2,
    h3 {
        letter-spacing: -0.01em;
        line-height: 1.2;
        font-weight: 600;
        margin-bottom: 0;
    }
    
    .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-top: 0;
        margin-bottom: 0.75em;
    }
    
    h1 {
        font-size: 1.875rem;
        margin-top: 1.875rem;
    }
    
    h2 {
        font-size: 1.5rem;
        margin-top: 1.5rem;
    }
    
    h3 {
        font-size: 1.25rem;
        margin-top: 1.25rem;
    }
    
    .source {
        border: 1px solid #ddd;
        border-radius: 3px;
        padding: 1.5em;
        word-break: break-all;
    }
    
    .callout {
        border-radius: 3px;
        padding: 1rem;
    }
    
    figure {
        margin: 1.25em 0;
        page-break-inside: avoid;
    }
    
    figcaption {
        opacity: 0.5;
        font-size: 85%;
        margin-top: 0.5em;
    }
    
    mark {
        background-color: transparent;
    }
    
    .indented {
        padding-left: 1.5em;
    }
    
    hr {
        background: transparent;
        display: block;
        width: 100%;
        height: 1px;
        visibility: visible;
        border: none;
        border-bottom: 1px solid rgba(55, 53, 47, 0.09);
    }
    
    img {
        max-width: 100%;
    }
    
    @media only print {
        img {
            max-height: 100vh;
            object-fit: contain;
        }
    }
    
    @page {
        margin: 1in;
    }
    
    .collection-content {
        font-size: 0.875rem;
    }
    
    .column-list {
        display: flex;
        justify-content: space-between;
    }
    
    .column {
        padding: 0 1em;
    }
    
    .column:first-child {
        padding-left: 0;
    }
    
    .column:last-child {
        padding-right: 0;
    }
    
    .table_of_contents-item {
        display: block;
        font-size: 0.875rem;
        line-height: 1.3;
        padding: 0.125rem;
    }
    
    .table_of_contents-indent-1 {
        margin-left: 1.5rem;
    }
    
    .table_of_contents-indent-2 {
        margin-left: 3rem;
    }
    
    .table_of_contents-indent-3 {
        margin-left: 4.5rem;
    }
    
    .table_of_contents-link {
        text-decoration: none;
        opacity: 0.7;
        border-bottom: 1px solid rgba(55, 53, 47, 0.18);
    }
    
    table,
    th,
    td {
        border: 1px solid rgba(55, 53, 47, 0.09);
        border-collapse: collapse;
    }
    
    table {
        border-left: none;
        border-right: none;
    }
    
    th,
    td {
        font-weight: normal;
        padding: 0.25em 0.5em;
        line-height: 1.5;
        min-height: 1.5em;
        text-align: left;
    }
    
    th {
        color: rgba(55, 53, 47, 0.6);
    }
    
    ol,
    ul {
        margin: 0;
        margin-block-start: 0.6em;
        margin-block-end: 0.6em;
    }
    
    li > ol:first-child,
    li > ul:first-child {
        margin-block-start: 0.6em;
    }
    
    ul > li {
        list-style: disc;
    }
    
    ul.to-do-list {
        padding-inline-start: 0;
    }
    
    ul.to-do-list > li {
        list-style: none;
    }
    
    .to-do-children-checked {
        text-decoration: line-through;
        opacity: 0.375;
    }
    
    ul.toggle > li {
        list-style: none;
    }
    
    ul {
        padding-inline-start: 1.7em;
    }
    
    ul > li {
        padding-left: 0.1em;
    }
    
    ol {
        padding-inline-start: 1.6em;
    }
    
    ol > li {
        padding-left: 0.2em;
    }
    
    .mono ol {
        padding-inline-start: 2em;
    }
    
    .mono ol > li {
        text-indent: -0.4em;
    }
    
    .toggle {
        padding-inline-start: 0em;
        list-style-type: none;
    }
    
    /* Indent toggle children */
    .toggle > li > details {
        padding-left: 1.7em;
    }
    
    .toggle > li > details > summary {
        margin-left: -1.1em;
    }
    
    .selected-value {
        display: inline-block;
        padding: 0 0.5em;
        background: rgba(206, 205, 202, 0.5);
        border-radius: 3px;
        margin-right: 0.5em;
        margin-top: 0.3em;
        margin-bottom: 0.3em;
        white-space: nowrap;
    }
    
    .collection-title {
        display: inline-block;
        margin-right: 1em;
    }
    
    .page-description {
        margin-bottom: 2em;
    }
    
    .simple-table {
        margin-top: 1em;
        font-size: 0.875rem;
        empty-cells: show;
    }
    .simple-table td {
        height: 29px;
        min-width: 120px;
    }
    
    .simple-table th {
        height: 29px;
        min-width: 120px;
    }
    
    .simple-table-header-color {
        background: rgb(247, 246, 243);
        color: black;
    }
    .simple-table-header {
        font-weight: 500;
    }
    
    time {
        opacity: 0.5;
    }
    
    .icon {
        display: inline-block;
        max-width: 1.2em;
        max-height: 1.2em;
        text-decoration: none;
        vertical-align: text-bottom;
        margin-right: 0.5em;
    }
    
    img.icon {
        border-radius: 3px;
    }
    
    .user-icon {
        width: 1.5em;
        height: 1.5em;
        border-radius: 100%;
        margin-right: 0.5rem;
    }
    
    .user-icon-inner {
        font-size: 0.8em;
    }
    
    .text-icon {
        border: 1px solid #000;
        text-align: center;
    }
    
    .page-cover-image {
        display: block;
        object-fit: cover;
        width: 100%;
        max-height: 30vh;
    }
    
    .page-header-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }
    
    .page-header-icon-with-cover {
        margin-top: -0.72em;
        margin-left: 0.07em;
    }
    
    .page-header-icon img {
        border-radius: 3px;
    }
    
    .link-to-page {
        margin: 1em 0;
        padding: 0;
        border: none;
        font-weight: 500;
    }
    
    p > .user {
        opacity: 0.5;
    }
    
    td > .user,
    td > time {
        white-space: nowrap;
    }
    
    input[type="checkbox"] {
        transform: scale(1.5);
        margin-right: 0.6em;
        vertical-align: middle;
    }
    
    p {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
    }
    
    .image {
        border: none;
        margin: 1.5em 0;
        padding: 0;
        border-radius: 0;
        text-align: center;
    }
    
    .code,
    code {
        background: rgba(135, 131, 120, 0.15);
        border-radius: 3px;
        padding: 0.2em 0.4em;
        border-radius: 3px;
        font-size: 85%;
        tab-size: 2;
    }
    
    code {
        color: #eb5757;
    }
    
    .code {
        padding: 1.5em 1em;
    }
    
    .code-wrap {
        white-space: pre-wrap;
        word-break: break-all;
    }
    
    .code > code {
        background: none;
        padding: 0;
        font-size: 100%;
        color: inherit;
    }
    
    blockquote {
        font-size: 1.25em;
        margin: 1em 0;
        padding-left: 1em;
        border-left: 3px solid rgb(55, 53, 47);
    }
    
    .bookmark {
        text-decoration: none;
        max-height: 8em;
        padding: 0;
        display: flex;
        width: 100%;
        align-items: stretch;
    }
    
    .bookmark-title {
        font-size: 0.85em;
        overflow: hidden;
        text-overflow: ellipsis;
        height: 1.75em;
        white-space: nowrap;
    }
    
    .bookmark-text {
        display: flex;
        flex-direction: column;
    }
    
    .bookmark-info {
        flex: 4 1 180px;
        padding: 12px 14px 14px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
    
    .bookmark-image {
        width: 33%;
        flex: 1 1 180px;
        display: block;
        position: relative;
        object-fit: cover;
        border-radius: 1px;
    }
    
    .bookmark-description {
        color: rgba(55, 53, 47, 0.6);
        font-size: 0.75em;
        overflow: hidden;
        max-height: 4.5em;
        word-break: break-word;
    }
    
    .bookmark-href {
        font-size: 0.75em;
        margin-top: 0.25em;
    }
    
    .sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
    .code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
    .serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
    .mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
    .pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
    .pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
    .pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
    .pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
    .pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
    .pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
    .pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
    .pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
    .pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
    .pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
    .pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
    .pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
    .pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
    .pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
    .pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
    .pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
    .highlight-default {
        color: rgba(55, 53, 47, 1);
    }
    .highlight-gray {
        color: rgba(120, 119, 116, 1);
        fill: rgba(120, 119, 116, 1);
    }
    .highlight-brown {
        color: rgba(159, 107, 83, 1);
        fill: rgba(159, 107, 83, 1);
    }
    .highlight-orange {
        color: rgba(217, 115, 13, 1);
        fill: rgba(217, 115, 13, 1);
    }
    .highlight-yellow {
        color: rgba(203, 145, 47, 1);
        fill: rgba(203, 145, 47, 1);
    }
    .highlight-teal {
        color: rgba(68, 131, 97, 1);
        fill: rgba(68, 131, 97, 1);
    }
    .highlight-blue {
        color: rgba(51, 126, 169, 1);
        fill: rgba(51, 126, 169, 1);
    }
    .highlight-purple {
        color: rgba(144, 101, 176, 1);
        fill: rgba(144, 101, 176, 1);
    }
    .highlight-pink {
        color: rgba(193, 76, 138, 1);
        fill: rgba(193, 76, 138, 1);
    }
    .highlight-red {
        color: rgba(212, 76, 71, 1);
        fill: rgba(212, 76, 71, 1);
    }
    .highlight-gray_background {
        background: rgba(241, 241, 239, 1);
    }
    .highlight-brown_background {
        background: rgba(244, 238, 238, 1);
    }
    .highlight-orange_background {
        background: rgba(251, 236, 221, 1);
    }
    .highlight-yellow_background {
        background: rgba(251, 243, 219, 1);
    }
    .highlight-teal_background {
        background: rgba(237, 243, 236, 1);
    }
    .highlight-blue_background {
        background: rgba(231, 243, 248, 1);
    }
    .highlight-purple_background {
        background: rgba(244, 240, 247, 0.8);
    }
    .highlight-pink_background {
        background: rgba(249, 238, 243, 0.8);
    }
    .highlight-red_background {
        background: rgba(253, 235, 236, 1);
    }
    .block-color-default {
        color: inherit;
        fill: inherit;
    }
    .block-color-gray {
        color: rgba(120, 119, 116, 1);
        fill: rgba(120, 119, 116, 1);
    }
    .block-color-brown {
        color: rgba(159, 107, 83, 1);
        fill: rgba(159, 107, 83, 1);
    }
    .block-color-orange {
        color: rgba(217, 115, 13, 1);
        fill: rgba(217, 115, 13, 1);
    }
    .block-color-yellow {
        color: rgba(203, 145, 47, 1);
        fill: rgba(203, 145, 47, 1);
    }
    .block-color-teal {
        color: rgba(68, 131, 97, 1);
        fill: rgba(68, 131, 97, 1);
    }
    .block-color-blue {
        color: rgba(51, 126, 169, 1);
        fill: rgba(51, 126, 169, 1);
    }
    .block-color-purple {
        color: rgba(144, 101, 176, 1);
        fill: rgba(144, 101, 176, 1);
    }
    .block-color-pink {
        color: rgba(193, 76, 138, 1);
        fill: rgba(193, 76, 138, 1);
    }
    .block-color-red {
        color: rgba(212, 76, 71, 1);
        fill: rgba(212, 76, 71, 1);
    }
    .block-color-gray_background {
        background: rgba(241, 241, 239, 1);
    }
    .block-color-brown_background {
        background: rgba(244, 238, 238, 1);
    }
    .block-color-orange_background {
        background: rgba(251, 236, 221, 1);
    }
    .block-color-yellow_background {
        background: rgba(251, 243, 219, 1);
    }
    .block-color-teal_background {
        background: rgba(237, 243, 236, 1);
    }
    .block-color-blue_background {
        background: rgba(231, 243, 248, 1);
    }
    .block-color-purple_background {
        background: rgba(244, 240, 247, 0.8);
    }
    .block-color-pink_background {
        background: rgba(249, 238, 243, 0.8);
    }
    .block-color-red_background {
        background: rgba(253, 235, 236, 1);
    }
    .select-value-color-interactiveBlue { background-color: rgba(35, 131, 226, .07); }
    .select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
    .select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
    .select-value-color-green { background-color: rgba(219, 237, 219, 1); }
    .select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
    .select-value-color-translucentGray { background-color: rgba(255, 255, 255, 0.0375); }
    .select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
    .select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
    .select-value-color-red { background-color: rgba(255, 226, 221, 1); }
    .select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
    .select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
    .select-value-color-pageGlass { background-color: undefined; }
    .select-value-color-washGlass { background-color: undefined; }
    
    .checkbox {
        display: inline-flex;
        vertical-align: text-bottom;
        width: 16;
        height: 16;
        background-size: 16px;
        margin-left: 2px;
        margin-right: 5px;
    }
    
    .checkbox-on {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
    }
    
    .checkbox-off {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
    }
        
</style></head><body><article id="27fb4b5d-fbd6-46e6-bf59-4bf3bcdb3898" class="page sans"><header><h1 class="page-title">포트폴리오</h1><p class="page-description"></p></header><div class="page-body"><h2 id="b1793191-79c0-4459-99bd-c5e7a5c0e52b" class="">중고 경매 서비스 BidderOwn 제작</h2><div id="f26b2193-a3d7-453b-91a4-86f9b5dade78" class="column-list"><div id="76aee633-820f-443f-8a4f-79eff30418e2" style="width:12.5%" class="column"><p id="adcdb5e9-1f0a-460d-b7aa-b42146268fd0" class=""><strong>기간</strong></p><p id="fb8f3094-c622-438a-a309-4856316b3e98" class=""><strong>Github</strong></p><p id="a48f78ca-4524-4831-83a8-a7f1febfc697" class=""><strong>인원</strong></p><p id="31db8dbb-2258-47b6-831b-b11ddb4e7692" class=""><strong>기술</strong></p></div><div id="327a3795-8b9c-4ab7-9289-137dd1e8830f" style="width:87.5%" class="column"><p id="0dfe955e-fc8a-4b42-ab10-49ff30b9cbe2" class="">2023.05 ~ 2023.07</p><p id="a7fefd9f-1e4f-4cbd-8b3d-f407ff0b2fc7" class=""><a href="https://github.com/BidderOwn/BidderOwn_BE">https://github.com/BidderOwn/BidderOwn_BE</a></p><p id="2867ac77-3351-4775-ae1d-0bbc866cd962" class="">4명</p><p id="d37adda0-74fe-4669-a898-60395f678277" class=""><code>java</code> <code>spring boot</code> <code>jpa</code> <code>querydsl</code> <code>websocket</code> <code>mysql</code> <code>lombok</code> <code>gradle</code> <code>redis</code> <code>vue.js</code></p></div></div><hr id="25dfb335-e8ae-4a90-994b-91a507a1de55"/><h3 id="e7d2a1bb-1aaa-46e0-989a-deb29c40b7ba" class="">개요</h3><p id="00a394c8-1745-4659-816e-7e39e3bf602a" class="">경매를 통해 중고물품을 사고 파는 서비스입니다. 판매자는 더 높은 가격에 판매할 수 있고 구매자는 다양한 가격을 제시하여서 시세에 반영할 수 있습니다.</p><hr id="25fdbd93-d7b2-48f4-a433-43bdbbf1ac85"/><div><h3 id="53b23a8c-7010-4a0b-a54d-3adf919658aa" class="">개발 내용</h3><h3 id="225b80d0-1599-4ea3-8fdc-453109ed98e2" class="">#상품 목록 API 개발 및 쿼리 개선</h3><p id="15b64876-5193-49b6-a240-a618aaa21b2b" class="">홈 화면에 보여질 상품 리스트 API를 개발하고 쿼리를 개선하였습니다. </p><ol type="1" id="73671d79-4d76-4a24-8f5c-1e494b76c8d7" class="numbered-list" start="1"><li>최신순 
최신순은 Item테이블의 id(PK)가 높은 순으로 정렬하기 때문에 커서기반의 No offset을 적용하여서 개선하였습니다. Ngrinder로 성능테스트를 하였을 때 TPS 47에서 700정도로 개선하였습니다.</li></ol><ol type="1" id="67fc3b43-6941-4ceb-b0d2-2e5881f6770d" class="numbered-list" start="2"><li>인기순(입찰건수순)
인기순은 입찰건수 기준으로 정렬이기 때문에 <code>ORDER BY</code>에 <code>COUNT</code> 쿼리가 필요하였습니다. 매 요청마다 COUNT 기준으로 정렬하는 것을 개선하고자 Redis의 Sorted set 자료구조를 이용하였습니다. 
상품에 입찰이 등록되면 EntityListener의 <code>@PostPersist</code>어노테이션을 통해 redis에 있는 상품의 score를 증가시켰습니다.</li></ol><ol type="1" id="ffcf165d-acda-4299-bb4c-ddc8036562cf" class="numbered-list" start="3"><li>경매마감순
경매마감순은 Item 테이블의 <code>expire_at</code>을 이용하여 정렬합니다. 쿼리 플랜을 확인하였을 때, <code>WHERE</code> 조건으로 인해 인덱스를 사용하지 못하였고 커버링 인덱스를 적용하여서 개선하였습니다.</li></ol><p id="f5aa8bb8-b90b-4cb2-b374-b6fad57a66e8" class="">*<mark class="highlight-gray">블로그 정리 자료</mark></p><ul id="5fbc2863-a8c3-49cb-8abf-be357f89095e" class="bulleted-list"><li style="list-style-type:disc"><a href="https://velog.io/@leui9179/BidderOwn-cqrs-%ED%8C%A8%ED%84%B4-%EC%A0%81%EC%9A%A9%EA%B8%B0">BidderOwn 최신순 쿼리 개선기 (No offset)</a></li></ul><ul id="6ff70660-32e5-4891-b676-770730a7fdf7" class="bulleted-list"><li style="list-style-type:disc"><a href="https://velog.io/@leui9179/BidderOwn-%EC%9D%B8%EA%B8%B0%EB%8F%84-%EC%88%9C-%EC%A0%95%EB%A0%AC-%EA%B0%9C%EC%84%A0Redis-sorted-set">BidderOwn 인기순 쿼리 개선기(Redis)</a></li></ul><ul id="478090dd-d938-42ba-b475-65c84dafdeac" class="bulleted-list"><li style="list-style-type:disc"><a href="https://velog.io/@leui9179/BIdderOwn-%EA%B2%BD%EB%A7%A4-%EB%A7%88%EA%B0%90-%EC%88%9C-%EC%A0%95%EB%A0%AC%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EC%BB%A4%EB%B2%84%EB%A7%81-%EC%9D%B8%EB%8D%B1%EC%8A%A4">BidderOwn 경매 마감순 개선기(커버링 인덱스)</a></li></ul><p id="4e15760e-f65e-4ba1-9c9b-5720d8991616" class="">
</p><h3 id="e42ebb05-32c5-46d5-98d3-bad0b6a114a6" class="">#JPA 성능 최적화</h3><p id="c8b5e40e-a28b-4eb2-83d7-b51534be6257" class="">모든 Fetch 전략을 LAZY로 설정하여 해당 로직에 필요한 쿼리만 실행되도록 구현하였습니다. 또한 N + 1 문제가 발생하는 부분을 찾아 Querydsl로 리팩토링을 하여 불필요한 쿼리가 실행되는 것을 최소화하였습니다.</p><p id="b7c1d36f-45f2-4e56-af0b-c864564d540d" class="">
</p><h3 id="bcbdb131-eb38-4146-aa36-c9cd17b5252f" class="">#Redis를 이용한 상품 경매 마감 처리</h3><p id="266b2881-be59-4564-b23d-7a914c7a9efc" class="">처음엔 Spring batch를 사용하여서 특정 시간대에 상품의 경매 종료를 일괄적으로 처리하였습니다.
이후, 일괄 처리하는 기능이 서비스적으로 적합하지 않다고 판단하였고, Redis를 이용하여 리팩토링하였습니다.
로직은 다음과 같습니다.</p><ol type="1" id="c5427b38-02d0-48b6-a00b-db77638cd70f" class="numbered-list" start="1"><li>JPA의 EntityListener의 <code>@PostPersist</code> 어노테이션을 통해 Redis에 저장합니다. 이 때 사용자가 지정한 경매 종료 시간을 expire time으로 저장합니다.</li></ol><ol type="1" id="b23c2f6f-2d38-49c3-afed-84f55c1cf0e8" class="numbered-list" start="2"><li>Spring Redis Data의 <code>MessageListener</code>를 구현하여 expire 이벤트를 감지합니다.</li></ol><ol type="1" id="61798db9-de3d-4fd0-a8f0-0d448a662c97" class="numbered-list" start="3"><li>Expire 이벤트가 감지되면 경매 종료 처리를 하고 입찰자들에게 알림을 전송합니다.</li></ol><p id="bab74727-6e7e-472d-a434-90c8e2b9f352" class="">이 리팩토링을 통해 상품의 경매 종료를 개별로 처리할 수 있었고 서비스적으로 개선되었습니다.</p><p id="a5a616a8-644e-4b13-a850-9d05c7dd152c" class="">*<mark class="highlight-gray">블로그 정리 자료</mark></p><ul id="5b3cd364-c0c3-41cf-a61f-e01eb0fba595" class="bulleted-list"><li style="list-style-type:disc"><a href="https://velog.io/@leui9179/%EA%B2%BD%EB%A7%A4-%EC%A2%85%EB%A3%8C-%EC%B2%98%EB%A6%AC-Spring-batch%EC%97%90%EC%84%9C-Redis%EB%A1%9C-%EB%A6%AC%ED%8C%A9%ED%86%A0%EB%A7%81-%ED%95%98%EA%B8%B0-vtdzd87j">BidderOwn 경매 종료 처리 리팩토링</a></li></ul><p id="e9504e0d-6923-40bc-b836-a4e25138b8f1" class="">
</p><h3 id="6ad70565-d711-4917-96c3-5cae5eb74050" class="">#채팅 및 실시간 알림 기능 최적화</h3><p id="902a884d-b373-4509-8b67-38731df46612" class="">STOMP를 사용하여 채팅 기능과 실시간 알림기능을 개발하였습니다. Firebase의 API를 이용하여서 개발할 수 있지만 웹소켓의 학습을 위해 직접 구현하게 되었습니다.
처음엔 사용자가 상품과 채팅창 별로 토픽을 구독하고 특정 아이템에 이벤트가 발생하였을 때, 알림을 받는 구조였습니다.</p><figure id="d196fc55-8603-42d6-bb64-7076ea9aeb48" class="image" style="text-align:center"><a href="https://i.postimg.cc/BbBMCLd1/socket1.png"><img style="width:384px" src="https://i.postimg.cc/BbBMCLd1/socket1.png"/></a></figure><p id="fb032577-d3a3-4eea-8eae-41a844c7f5e0" class="">하지만 서버 사이드 랜더링 특성상 페이지를 이동하면 <strong>소켓연결이 끊기는 문제</strong>가 있었습니다. 결국 사용자가 페이지를 이동할 때마다 자신과 연관된 상품과 채팅창의 소켓을 모두 재 연결해야하는 문제가 있었습니다. </p><p id="fbfde732-7285-4b32-97f0-0eaa3c1c63c4" class="">또한 서버와 클라이언트의 잘못된 역할 분리로 인해 도메인 별로 서비스 로직에 메시지 발행(pub) 코드가 포함되게 되었고 코드의 복잡도와 의존도가 증가하였습니다.</p><p id="895421ce-8389-4c00-8e10-9d53c5a3b52f" class="">
</p><p id="5d79d83e-8298-4301-a79b-e8a58016624b" class="">이 문제를 해결하기 위해 다음과 같이 개선하였습니다.</p><ol type="1" id="141a7fff-7a25-4efe-a2e0-c5a9d3076045" class="numbered-list" start="1"><li>클라이언트와 서버의 명확한 역할 분리
도메인 별 서비스 로직의 발행 코드를 제거하기 위해 클라이언트에서 pub/sub을 모두 담당하게 변경하고 서버에서 STOMP를 지원하는 <code>@MessageMapping</code>을 이용하여서 알림 로직을 한 컨트롤러로 모았습니다. 이 개선을 통해 도메인의 서비스 별로 알림을 전송하는 로직을 없앨 수 있었습니다.</li></ol><ol type="1" id="ef2dc917-0d07-4fad-82fd-fa70cd021db2" class="numbered-list" start="2"><li>사용자 자신의 ID 구독
기존의 사용자가 상품별로 구독하던 방식을 자신의 ID(PK)를 구독하는 방식으로 변경하였습니다.
이 구조를 통해서 페이지 이동 시 발생하는 소켓연결을 n개에서 1개로 줄일 수 있었고 데이터베이스에 저장되는 소켓 연결 정보 테이블도 없앨 수 있었습니다.<figure id="5fbcc8aa-9988-4297-b104-4f3c9926858f" class="image" style="text-align:center"><a href="https://i.postimg.cc/13jMMZYM/socket2.png"><img style="width:432px" src="https://i.postimg.cc/13jMMZYM/socket2.png"/></a></figure></li></ol><p id="fa237aef-a6a6-457c-89a7-6d4550ddce7e" class="">이후 다른 팀원이 ‘판매완료’ 알림 기능을 구현할 때 코드 몇 줄로 개발을 완료할 수 있었습니다.
</p><h3 id="9b5939d0-0502-4bd2-ba17-fec1651df31d" class="">#CI/CD</h3><p id="06b333f5-1909-40bc-bf03-962fbf96caab" class="">빌드와 배포를 자동화 하기 위해 Github action을 사용하여 CI/CD를 적용하였습니다. 이전 프로젝트에서 docker를 사용하여 배포하였고 서버 변경이 생길 때마다 직접 접속하여 수동으로 코드를 다운받고 컨테이너를 재실행해야하는 불편함이 있었습니다. 이번에는 이를 해결하고자 CI/CD를 적용하였습니다. 
레포지토리에 push를 하면, 다음과 같은 순서로 동작합니다.</p><ol type="1" id="77aa6a39-1781-4f6d-b2c1-3454694fd01a" class="numbered-list" start="1"><li>프로젝트 빌드</li></ol><ol type="1" id="784c84b0-3c5c-48ba-824e-df37e53ba262" class="numbered-list" start="2"><li>jar, appspec.yml, deploy.sh(배포 스크립트)를 zip 파일로 압축</li></ol><ol type="1" id="7875466d-fe82-408e-aed3-70d435d703c4" class="numbered-list" start="3"><li>압축한 파일을 S3로 전송</li></ol><ol type="1" id="31d2367e-1051-4a79-8d38-d04fb8ee92e5" class="numbered-list" start="4"><li>EC2가 S3에 있는 zip 파일을 다운 받고 압축해제</li></ol><ol type="1" id="7117c3bb-16fb-4443-a1ff-715212caf857" class="numbered-list" start="5"><li>deploy.sh 실행</li></ol><p id="1193e6da-3cc0-456d-9c7b-20fa66cfdb80" class="">*<mark class="highlight-gray">블로그 정리 자료</mark></p><ul id="60e307bd-b671-4225-b05c-cba47d59a68f" class="bulleted-list"><li style="list-style-type:disc"><a href="https://velog.io/@leui9179/BidderOwn-Github-Action%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%98%EC%97%AC-CICD-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0">BidderOwn CI/CD 적용기</a></li></ul><p id="d0ed9e3f-61e7-4346-ae1b-1abc6cea034d" class="">
</p><h3 id="68e4a611-5105-43b9-909c-3a14bd7c853d" class="">#Elasticache CONFIG SET 문제</h3><p id="a0219720-3a9c-4770-a981-639a17e079f4" class="">Redis를 사용하기 위해 AWS의 Elasticache(Redis) 를 이용하여서 배포하였습니다. 
경매 종료 처리를 Redis의 key expire 기능을 사용하여 구현하였지만 AWS의 Elasticache는 서버에서 직접 expire 이벤트 설정 변경을 허용하지 않기 때문에 Parameter Groupd을 직접 생성하고 notify-keyspace-events의 값을 Ex로 설정해줌으로써 해결하였습니다.</p><p id="06fee0d6-99a0-4b2f-81c1-09e9d3986a1b" class="">
</p><h3 id="47ce2212-7352-469e-a159-afb79e6b344d" class="">기타</h3><p id="527cdc06-5e96-46b8-bf9c-7b4ac7e1327a" class="">이외에도 데이터베이스 설계, 인덱스 적용, Vue.js를 이용한 UI 개발을 하였습니다.</p></div><hr id="028cfa6a-ade4-4516-9ad6-5215edefcea8"/><p id="7a9ff012-7efe-40ac-8eb9-21eb01be28bd" class="">
</p><h2 id="04cfcfe9-3560-4f4b-b523-9ee27125f09f" class="">게이머를 위한 SNS DOR.GG</h2><div id="2deb2b77-7613-4659-875a-7000bed1dbdd" class="column-list"><div id="1742f93d-95c2-4e23-a764-d799aea9e470" style="width:12.5%" class="column"><p id="a059469f-04a4-45ac-adbf-89a15e5f5228" class=""><strong>기간</strong></p><p id="0da8e647-fd15-4dc8-b485-7d8b94da478d" class=""><strong>Github</strong></p><p id="c903bed4-921f-4032-8fe7-b987adff2d41" class=""><strong>인원</strong></p><p id="cdb98d4e-bce8-4e3f-8075-e7fe1f87a5b7" class=""><strong>기술</strong></p><p id="181fa87e-83dd-474a-8eaf-ce86c3a55941" class=""><strong>Tool</strong></p><p id="fcb18eef-7b6c-409a-9b5b-c45d3c97e0fa" class=""><strong>홈페이지</strong></p></div><div id="21f2e1a1-5fe6-43ab-9606-537f9bd7d45f" style="width:87.5%" class="column"><p id="ad3a8526-d6e8-4679-b7d0-292b636b0875" class="">2021.12 ~ 2022.06</p><p id="a645dc78-fd79-44e7-abd8-97426ae6efd0" class="block-color-gray">현재 Github 레포지터리가 프라이빗으로 변경되었습니다.</p><p id="561fb582-40d2-4178-bd51-76ded5719cd7" class="">4명</p><p id="306554db-74f6-4abf-8f38-19eda03c65b0" class=""><code>flask</code> <code>sqlalchemy</code> <code>node.js</code> <code>docker</code> <code>mysql</code> <code>mongodb</code> <code>redis</code> <code>react</code></p><p id="4a068371-b68d-4c88-b60c-dd3e97e2b696" class=""><code>slack</code> <code>notion</code> <code>figma</code></p><p id="f52426e8-0dc2-4cfb-8cd0-71ccfc8d9700" class="">https://dor.gg</p></div></div><hr id="3c9f06e9-6846-4171-844e-2678a81ab9cf"/><h3 id="0d6e7bee-4100-48d5-93d9-d7404e0259c8" class="">개요</h3><p id="b45dec7b-1c75-440a-91c8-01987583bea2" class="">DOR.GG는 게이머를 위한 SNS입니다. 녹화, 편집, 업로드 기능까지 제공함으로써 쉽고 편하게 자신의 게임 플레이를 공유할 수 있도록 도움을 줍니다.</p><hr id="009cdb74-3299-4fd0-82b2-cfca7deab153"/><h3 id="6b5a50a6-3aab-43b4-8908-fbc8f45b682d" class="">프로젝트 구조도</h3><figure id="cc91b0ff-977a-4a70-acb2-17609daf3dd1" class="image" style="text-align:center"><a href="https://i.postimg.cc/kGkZtypP/dor-gg.png"><img style="width:432px" src="https://i.postimg.cc/kGkZtypP/dor-gg.png"/></a></figure><hr id="b8b6f7d0-f639-44d9-8401-a92939b8cc4f"/><h3 id="6cf44721-7418-4f41-86d8-58f8dec54900" class="">#동영상 인코딩 비동기 처리</h3><p id="4cde105a-bd2c-454d-8fd9-5ca5c8389a79" class="">사용자가 동영상을 업로드하면 인코딩 시간동안 기다려야하는 문제가 발행하였습니다. 이 문제를 해결하기 위해 비동기 메시지 큐인 celery를 이용하여 인코딩을 비동기로 처리하였습니다.</p><h3 id="79f467d3-f3ae-4d78-84e5-396c69d00472" class="">#사용자 비정형 데이터 MongoDB</h3><p id="21d1c7f7-854f-4ffd-b0b4-611003294c90" class="">게임마다 실력을 나타내는 지표가 달랐고 필요한 데이터도 달랐기 때문에 MongoDB를 사용하여 비정형데이터를 저장하였습니다.</p><h3 id="ea5a4a1d-3428-4194-b838-11185fdb1063" class="">#컨텐츠 서버 분리</h3><p id="6ea5ffbc-7d20-49dd-9f9f-64ed5bb47f19" class="">API 서버에 포함되어 있던 이미지 처리, 동영상 인코딩 기능을 컨텐츠 서버로 분리하고 리팩토링하였습니다.</p><h3 id="5fd46141-7072-4d1f-8803-4a4c3f774824" class="">#동영상 인코딩</h3><p id="1d4ce13d-b30e-4775-a5aa-7f0335b23055" class="">MacOS의 safari에서 특정 동영상의 코덱과 확장자를 지원하지 않아서 재생되지 않는 오류가 있었습니다. 이 문제를 해결하기 위해 ffmpeg를 사용해서 동영상 표준 규격인 H264 코덱과 mp4의 확장자로 인코딩하여 해결하였습니다.</p></div></article></body></html>